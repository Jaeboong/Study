네트워크 레이어에서 라우팅 테이블을 통해 다음 로지컬 주소를 얻고 ARP 프로토콜을 통해 MAC 주소를 얻는다.

항상 최종적으로 데이터를 전송할 때는 MAC Adress가 필요하다.

MAC Adress는 ARP 프로토콜을 통해 Logical Adress를 통해 MAC Adress를 알아온다.

# chap5

## IP 란?

IPv4 주손느 32비트 주소로 유일하고 보편적이다.

약 43억개가 있으며 보통 2진법을 사용하며 우리가 알아보기 편하도록 10진법으로 표기하기도 하며 8비트로 나눠서 표기한다.

## 연산

- NOT: ex) 00010001 -> 11101110 (비트 반전)
- AND: ex) 00010001 AND 11111111 -> 00010001 (둘중 하나라도 0이면 0)
-  OR: ex) 00010001 OR 11111111 -> 11111111 (둘중 하나라도 1이면 1)

## Class

Clessful Adress(클래스 기반 주소지정): 클래스 A~E를 사용하며 클래스에 따라 주소 공간이 결정된다.

![image](https://github.com/Jaeboong/Study/assets/158824294/45c357fa-92df-4545-8eb0-124ce0c4706b)

클래스 기반 주소지정 클래스 A, B, C의 IP 주소는 netid와 hostid로 나누어진다.

```
netid -> 동네를 구분하는 주소
hostid-> 해당 동네의 누구인지 판별하는 주소
```

![image](https://github.com/Jaeboong/Study/assets/158824294/fa89fca9-2102-4763-8c67-e26c7972fec9)

A, B, C에서 왼쪽 파란색 부분이 netid, 오른쪽 노란부분이 hostid이다.

D, E는 host와 netid로 나누어지지않는다.

### Class A

![image](https://github.com/Jaeboong/Study/assets/158824294/c6323766-7568-4a79-866e-fed426ace3b1)

1개의 바이트만 netid를 정의하고 가장 왼쪽 비트는 0이 되어야한다.

총 128개의 기관에 할당이 가능하며 각 할당되는 기관마다 16777216이라는 많은 주소를 할당하므로 많은 주소가 낭비된다.

매우 큰 블록이다.

### Class B

![image](https://github.com/Jaeboong/Study/assets/158824294/90c73ae4-5824-4d76-b64a-c45c571cd015)

클래스 B는 2바이트를 netid 로 사용하며 그 중 맨 왼쪽 비트 2개를 10으록 고정하여 나머지 14비트로 netid를 결정한다.

총 16384 기관에 할당이 가능하며 각 블록은 65536개의 주소를 포함한다.

### Class C 

클래스 C는 3바이트를 netid에 사용하고 그 중 왼쪽 3비트를 110으로 고정한다.

그리고 남은 21비트를 2097152 블록을 각 기관에 할당하고 각 블록당 256개의 주소를 포함한다.

작은 기관은 C 클래스를 이용한다.

### Class D

![image](https://github.com/Jaeboong/Study/assets/158824294/d909a23d-8676-4f57-a3af-6bdadae5d474)

한 블록만 존재하는 클래스 D는 멀티캐스트를 위해 존재하며 동네를 식별하기만 하면 되므로 호스트 아이디가 없고 netid 만 존재한다.

### Class E

![image](https://github.com/Jaeboong/Study/assets/158824294/fcaefd95-d054-4178-889a-f915c2c683c7)

클래스 E 역시 한 블록만 가지며 예약된 주소로 사용하기 위해 설계되었다.

- 마지막 주소 255.255.255는 Special주소로써 브로드캐스트 주소이다. 해당 동네 안에 모든 호스트에게 브로드캐스트하는 주소이다.

### 예제

![image](https://github.com/Jaeboong/Study/assets/158824294/ca6abedd-42dd-45ca-870a-09638ffe0e73)

Classful Address라고 가정했을 때 맨 처음 8비트가 128~191 사이이므로 Class B이다.

Class B는 2바이트가 netid에 해당되므로 해당 주소의 서브넷마스크는 255.255.0.0이며 first address는 180.8.0.0이고 last address는 180.8.255.255이다.

![image](https://github.com/Jaeboong/Study/assets/158824294/3089ba07-baa8-4cc5-9603-ca584ac626e8)

샘플 인터넷 예제이다. 라우터들은 동네에 연결된 만큼의 주소를 가지고있다.


IP Layer -> Network Layer라고 부르고

IP주소는 uniquely, universally하다. 중복이 불가하고 전 세계에서 사용하기 때문에 universally하다.

Ex 5.5)

첫번째주소, 마지막주소, 주소 전체 길이를 알면 어떤 주소가 있을 때 해당 지역에 속하는지 알 수 있기 때문에 이 세 주소를 아는것은 중요하다.

## Network Mask

네트워크 마스크를 사용하면 네트워크 시작주소를 얻을 수 있다. netid 부분을 모두 1, hostid 부분을 모두 0으로 설정한다.

네트워크 마스크를 사용해 전체 블록과 범위를 찾을 수 있다.

A, B, C클래스는 각각 /8 /16 /24의 기본 네트워크 마스크를 가진다.

### 예제

예를들어 목적지 주소가 201.24.67.32 패킷을 받는다. 라우터는 클래스 B의 디폴트 마스크인 255.255.0.0을 적용하면 네트워크 주소가 201.24.0.0 임을 알 수 있다.

## Subnet

마스크가 /16인 네트워크를 4개의 서브넷으로 나누면 16+log(2)4 = 18, 즉 /18의 서브넷 마스크를가지게 된다.

------
어떤 주소가 있을 때 이 주소는 A,B,C,D,E 어디 것인지

해당 주소는 어느 동네에 해당되는지

어느 부분에 해당되는지
------

기존 classful address에서는 주소 덩어리가 있었는..


